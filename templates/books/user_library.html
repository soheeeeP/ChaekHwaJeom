{% extends 'books/base.html' %}
{% block content %}
{% load static %}

<head>
    <link rel="stylesheet" href="{% static 'css/book.css' %}">
    <link rel="stylesheet" href="{% static 'css/user_library.css'%}">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"/> -->
</head>

<script>
    $(document).ready(function () {
        $('.book').popover({
            html: true,
            container: 'body',
            content: function () {
                var id = $(this).attr('id')
                return $('#user-book-detail-content-' + id).html();
            }
        });
       // $('#myModal').show('modal');
    });
    $(document).on('show.bs.modal','#bookDeleteModal',function(event){
        var button = $(event.relatedTarget)
        pk = button.data('pk')

        $(this).find('#modal-hidden-data').val(pk)
    })
</script>

<body>
    <div class="modal fade" id="bookEditModal" tabindex="-1" role="dialog" aria-labelledby="bookEditModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
        <h5 class="modal-title name" id="bookDeleteModalLabel" style="display: none;">ë„ì„œ ë“±ë¡í•˜ê¸°</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
              <form>
                <div class="form-group">
                  <label for="recipient-name" class="col-form-label">Recipient:</label>
                  <input type="text" class="form-control" id="recipient-name">
                </div>
                <div class="form-group">
                  <label for="message-text" class="col-form-label">Message:</label>
                  <textarea class="form-control" id="message-text"></textarea>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Send message</button>
            </div>
        <input id="modal-hidden-data" name="pkvalue" style="display: none;">
        <button type="submit" class="btn-chaekhwajeom">
            <a>ë„¤ ğŸ˜­</a>
        </button>
          </div>
        </div>
      </div>
    <div class="user-library-container">
        <div class="user">
            <div class="user-info">
                <div class="user-info-name-follower">
                    <h3>{{user.username}}ë‹˜ì˜ ì„œì¬</h3>
                    <p>follower</p>
                </div>
                <div class="button-section-large">
                    <button class="chaekhwajeom-button-large" onclick=location.href="{% url 'book_search' %}">
                        <div class="button-text-section">
                            <a class="button-text">ë„ì„œ ë“±ë¡í•˜ê¸°</a>
                        </div>
                    </button>
                </div>
            </div>
            <div class="user-book">
                {%for book in books%}
                <div id="user-book-detail-content-{{book.pk}}" class="detail-content" style="display: none">
                    <p><b><{{book.title}}></b>, {{book.author}}</p>
                    <p>{{book.review.book_review}}</p>
                    <p>
                        {%for i in book.review_rate%}
                            â­ï¸
                        {%endfor%}
                    </p>
                    <p>
                        <a href="{% url 'home' %}">ìˆ˜ì •í•˜ê¸°</a>
                        <button type="button" data-toogle="modal" data-target="#bookEditModal" data-pk="{{book.pk}}">ìˆ˜ì •í•˜ê¸°</a>
                    </p>
                </div>

                <div class="book" data-toogle="popover" id="{{book.pk}}">
                    <div class="front">
                        <div class="cover" style="background-image: URL({{book.bookcover}});">
                        </div>
                    </div>
                </div>
                {%endfor%}
            </div>
        </div>
    </div>
</body>
{% endblock %}